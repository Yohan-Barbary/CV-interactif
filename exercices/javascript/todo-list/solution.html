<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solution - Todo List</title>
    <link rel="stylesheet" href="../../../commun/styles.css">
    <link rel="stylesheet" href="../../css/exercices.css">
    <link rel="stylesheet" href="./css/solution.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="nav-content">
            <div class="logo">
                <a href="../../../index.html" class="logo-text">&lt;DWWM/&gt;</a>
            </div>
            <ul class="nav-links">
                <li><a href="../../../index.html"><i class="fas fa-home"></i><span class="nav-text">Accueil</span></a></li>
                <li><a href="../../exercices.html"><i class="fas fa-tasks"></i><span class="nav-text">Exercices</span></a></li>
            </ul>
        </div>
    </nav>

    <main class="solution-content">
        <div class="solution-header">
            <div class="header-content">
                <h1>Solution : Todo List</h1>
                <p>Voici une solution possible pour l'exercice de la Todo List.</p>
            </div>
            <span class="difficulty beginner">Débutant</span>
        </div>

        <section class="code-preview">
            <h2>Aperçu du résultat</h2>
            <div class="preview-container">
                <div class="todo-app">
                    <h2>Ma Todo List</h2>
                    <div class="todo-input">
                        <input type="text" placeholder="Ajouter une tâche...">
                        <button class="add-btn"><i class="fas fa-plus"></i></button>
                    </div>
                    <div class="todo-filters">
                        <button class="filter-btn active" data-filter="all">Toutes</button>
                        <button class="filter-btn" data-filter="active">Actives</button>
                        <button class="filter-btn" data-filter="completed">Terminées</button>
                    </div>
                    <ul class="todo-list"></ul>
                </div>
            </div>
        </section>

        <section class="code-explanation">
            <h2>Structure HTML</h2>
            <div class="code-block">
                <pre><code>
<span class="comment">&lt;!-- Structure de la Todo List --&gt;</span>
<span class="tag">&lt;div</span> <span class="attr-name">class</span>=<span class="attr-value">"todo-app"</span><span class="tag">&gt;</span>
    <span class="tag">&lt;h2&gt;</span>Ma Todo List<span class="tag">&lt;/h2&gt;</span>
    <span class="tag">&lt;div</span> <span class="attr-name">class</span>=<span class="attr-value">"todo-input"</span><span class="tag">&gt;</span>
        <span class="tag">&lt;input</span> <span class="attr-name">type</span>=<span class="attr-value">"text"</span> <span class="attr-name">placeholder</span>=<span class="attr-value">"Ajouter une tâche..."</span><span class="tag">&gt;</span>
        <span class="tag">&lt;button</span> <span class="attr-name">class</span>=<span class="attr-value">"add-btn"</span><span class="tag">&gt;</span><span class="tag">&lt;i</span> <span class="attr-name">class</span>=<span class="attr-value">"fas fa-plus"</span><span class="tag">&gt;</span><span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/button&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attr-name">class</span>=<span class="attr-value">"todo-filters"</span><span class="tag">&gt;</span>
        <span class="tag">&lt;button</span> <span class="attr-name">class</span>=<span class="attr-value">"filter-btn active"</span> <span class="attr-name">data-filter</span>=<span class="attr-value">"all"</span><span class="tag">&gt;</span>Toutes<span class="tag">&lt;/button&gt;</span>
        <span class="tag">&lt;button</span> <span class="attr-name">class</span>=<span class="attr-value">"filter-btn"</span> <span class="attr-name">data-filter</span>=<span class="attr-value">"active"</span><span class="tag">&gt;</span>Actives<span class="tag">&lt;/button&gt;</span>
        <span class="tag">&lt;button</span> <span class="attr-name">class</span>=<span class="attr-value">"filter-btn"</span> <span class="attr-name">data-filter</span>=<span class="attr-value">"completed"</span><span class="tag">&gt;</span>Terminées<span class="tag">&lt;/button&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;ul</span> <span class="attr-name">class</span>=<span class="attr-value">"todo-list"</span><span class="tag">&gt;</span><span class="tag">&lt;/ul&gt;</span>
<span class="tag">&lt;/div&gt;</span></code></pre>
            </div>

            <h2>CSS</h2>
            <div class="code-block">
                <pre><code>
<span class="comment">/* Styles de la Todo List */</span>
<span class="selector">.todo-app</span> {
    <span class="property">max-width</span>: <span class="value">500px</span>;
    <span class="property">margin</span>: <span class="value">0 auto</span>;
    <span class="property">padding</span>: <span class="value">2rem</span>;
    <span class="property">background</span>: <span class="value">#1a1a1a</span>;
    <span class="property">border-radius</span>: <span class="value">12px</span>;
    <span class="property">box-shadow</span>: <span class="value">0 8px 24px rgba(0, 0, 0, 0.2)</span>;
}

<span class="selector">.todo-filters</span> {
    <span class="property">display</span>: <span class="value">flex</span>;
    <span class="property">gap</span>: <span class="value">0.5rem</span>;
    <span class="property">margin</span>: <span class="value">1rem 0</span>;
}

<span class="selector">.filter-btn</span> {
    <span class="property">padding</span>: <span class="value">0.5rem 1rem</span>;
    <span class="property">border</span>: <span class="value">1px solid rgba(255, 255, 255, 0.1)</span>;
    <span class="property">background</span>: <span class="value">transparent</span>;
    <span class="property">color</span>: <span class="value">#fff</span>;
    <span class="property">border-radius</span>: <span class="value">20px</span>;
    <span class="property">cursor</span>: <span class="value">pointer</span>;
    <span class="property">transition</span>: <span class="value">all 0.3s ease</span>;
}

<span class="selector">.filter-btn.active</span> {
    <span class="property">background</span>: <span class="value">#4CAF50</span>;
    <span class="property">border-color</span>: <span class="value">#4CAF50</span>;
}</code></pre>
            </div>

            <h2>JavaScript</h2>
            <div class="code-block">
                <pre><code>
<span class="comment">// Gestion du stockage local</span>
<span class="keyword">class</span> <span class="class-name">TodoStorage</span> {
    <span class="function">constructor</span>() {
        <span class="keyword">this</span>.key = <span class="string">'todos'</span>;
    }

    <span class="function">getTodos</span>() {
        <span class="keyword">const</span> todos = localStorage.<span class="function">getItem</span>(<span class="keyword">this</span>.key);
        <span class="keyword">return</span> todos ? JSON.<span class="function">parse</span>(todos) : [];
    }

    <span class="function">saveTodos</span>(todos) {
        localStorage.<span class="function">setItem</span>(<span class="keyword">this</span>.key, JSON.<span class="function">stringify</span>(todos));
    }
}

<span class="comment">// Gestion de l'interface utilisateur</span>
<span class="keyword">class</span> <span class="class-name">TodoUI</span> {
    <span class="function">constructor</span>() {
        <span class="keyword">this</span>.storage = <span class="keyword">new</span> <span class="class-name">TodoStorage</span>();
        <span class="keyword">this</span>.todos = <span class="keyword">this</span>.storage.<span class="function">getTodos</span>();
        <span class="keyword">this</span>.filter = <span class="string">'all'</span>;
        
        <span class="keyword">this</span>.<span class="function">initElements</span>();
        <span class="keyword">this</span>.<span class="function">initEventListeners</span>();
        <span class="keyword">this</span>.<span class="function">renderTodos</span>();
    }

    <span class="function">initElements</span>() {
        <span class="keyword">this</span>.todoInput = document.<span class="function">querySelector</span>(<span class="string">'.todo-input input'</span>);
        <span class="keyword">this</span>.addButton = document.<span class="function">querySelector</span>(<span class="string">'.add-btn'</span>);
        <span class="keyword">this</span>.todoList = document.<span class="function">querySelector</span>(<span class="string">'.todo-list'</span>);
        <span class="keyword">this</span>.filterButtons = document.<span class="function">querySelectorAll</span>(<span class="string">'.filter-btn'</span>);
    }

    <span class="function">initEventListeners</span>() {
        <span class="comment">// Ajouter une tâche</span>
        <span class="keyword">this</span>.addButton.<span class="function">addEventListener</span>(<span class="string">'click'</span>, () => <span class="keyword">this</span>.<span class="function">addTodo</span>());
        <span class="keyword">this</span>.todoInput.<span class="function">addEventListener</span>(<span class="string">'keypress'</span>, (e) => {
            <span class="keyword">if</span> (e.key === <span class="string">'Enter'</span>) <span class="keyword">this</span>.<span class="function">addTodo</span>();
        });

        <span class="comment">// Filtrage</span>
        <span class="keyword">this</span>.filterButtons.<span class="function">forEach</span>(btn => {
            btn.<span class="function">addEventListener</span>(<span class="string">'click'</span>, () => {
                <span class="keyword">this</span>.filterButtons.<span class="function">forEach</span>(b => b.classList.<span class="function">remove</span>(<span class="string">'active'</span>));
                btn.classList.<span class="function">add</span>(<span class="string">'active'</span>);
                <span class="keyword">this</span>.filter = btn.dataset.filter;
                <span class="keyword">this</span>.<span class="function">renderTodos</span>();
            });
        });
    }

    <span class="function">addTodo</span>() {
        <span class="keyword">const</span> text = <span class="keyword">this</span>.todoInput.value.<span class="function">trim</span>();
        <span class="keyword">if</span> (text === <span class="string">''</span>) <span class="keyword">return</span>;

        <span class="keyword">const</span> todo = {
            id: Date.<span class="function">now</span>(),
            text,
            completed: <span class="keyword">false</span>
        };

        <span class="keyword">this</span>.todos.<span class="function">push</span>(todo);
        <span class="keyword">this</span>.storage.<span class="function">saveTodos</span>(<span class="keyword">this</span>.todos);
        <span class="keyword">this</span>.todoInput.value = <span class="string">''</span>;
        <span class="keyword">this</span>.<span class="function">renderTodos</span>();
    }

    <span class="function">toggleTodo</span>(id) {
        <span class="keyword">this</span>.todos = <span class="keyword">this</span>.todos.<span class="function">map</span>(todo => {
            <span class="keyword">if</span> (todo.id === id) {
                <span class="keyword">return</span> { ...todo, completed: !todo.completed };
            }
            <span class="keyword">return</span> todo;
        });
        <span class="keyword">this</span>.storage.<span class="function">saveTodos</span>(<span class="keyword">this</span>.todos);
        <span class="keyword">this</span>.<span class="function">renderTodos</span>();
    }

    <span class="function">deleteTodo</span>(id) {
        <span class="keyword">const</span> todoElement = document.<span class="function">querySelector</span>(<span class="string">`[data-id="${id}"]`</span>);
        todoElement.classList.<span class="function">add</span>(<span class="string">'fade-out'</span>);

        <span class="function">setTimeout</span>(() => {
            <span class="keyword">this</span>.todos = <span class="keyword">this</span>.todos.<span class="function">filter</span>(todo => todo.id !== id);
            <span class="keyword">this</span>.storage.<span class="function">saveTodos</span>(<span class="keyword">this</span>.todos);
            <span class="keyword">this</span>.<span class="function">renderTodos</span>();
        }, <span class="number">300</span>);
    }

    <span class="function">getFilteredTodos</span>() {
        <span class="keyword">switch</span> (<span class="keyword">this</span>.filter) {
            <span class="keyword">case</span> <span class="string">'active'</span>:
                <span class="keyword">return</span> <span class="keyword">this</span>.todos.<span class="function">filter</span>(todo => !todo.completed);
            <span class="keyword">case</span> <span class="string">'completed'</span>:
                <span class="keyword">return</span> <span class="keyword">this</span>.todos.<span class="function">filter</span>(todo => todo.completed);
            <span class="keyword">default</span>:
                <span class="keyword">return</span> <span class="keyword">this</span>.todos;
        }
    }

    <span class="function">createTodoElement</span>(todo) {
        <span class="keyword">const</span> li = document.<span class="function">createElement</span>(<span class="string">'li'</span>);
        li.className = <span class="string">'todo-item'</span>;
        li.dataset.id = todo.id;
        <span class="keyword">if</span> (todo.completed) li.classList.<span class="function">add</span>(<span class="string">'completed'</span>);

        li.innerHTML = <span class="string">`
            &lt;span class="todo-text"&gt;${todo.text}&lt;/span&gt;
            &lt;div class="todo-actions"&gt;
                &lt;button class="complete-btn" title="Marquer comme ${todo.completed ? 'non ' : ''}terminé"&gt;
                    &lt;i class="fas fa-check"&gt;&lt;/i&gt;
                &lt;/button&gt;
                &lt;button class="delete-btn" title="Supprimer"&gt;
                    &lt;i class="fas fa-trash"&gt;&lt;/i&gt;
                &lt;/button&gt;
            &lt;/div&gt;
        `</span>;

        <span class="comment">// Événements des boutons</span>
        <span class="keyword">const</span> completeBtn = li.<span class="function">querySelector</span>(<span class="string">'.complete-btn'</span>);
        <span class="keyword">const</span> deleteBtn = li.<span class="function">querySelector</span>(<span class="string">'.delete-btn'</span>);

        completeBtn.<span class="function">addEventListener</span>(<span class="string">'click'</span>, () => <span class="keyword">this</span>.<span class="function">toggleTodo</span>(todo.id));
        deleteBtn.<span class="function">addEventListener</span>(<span class="string">'click'</span>, () => <span class="keyword">this</span>.<span class="function">deleteTodo</span>(todo.id));

        <span class="keyword">return</span> li;
    }

    <span class="function">renderTodos</span>() {
        <span class="keyword">this</span>.todoList.innerHTML = <span class="string">''</span>;
        <span class="keyword">const</span> filteredTodos = <span class="keyword">this</span>.<span class="function">getFilteredTodos</span>();

        filteredTodos.<span class="function">forEach</span>(todo => {
            <span class="keyword">const</span> todoElement = <span class="keyword">this</span>.<span class="function">createTodoElement</span>(todo);
            <span class="keyword">this</span>.todoList.<span class="function">appendChild</span>(todoElement);
            
            <span class="comment">// Animation d'entrée</span>
            <span class="function">requestAnimationFrame</span>(() => {
                todoElement.classList.<span class="function">add</span>(<span class="string">'fade-in'</span>);
            });
        });
    }
}

<span class="comment">// Initialisation</span>
document.<span class="function">addEventListener</span>(<span class="string">'DOMContentLoaded'</span>, () => {
    <span class="keyword">new</span> <span class="class-name">TodoUI</span>();
});</code></pre>
            </div>
        </section>

        <div class="solution-actions">
            <a href="exercice.html" class="btn-solution">Retour à l'exercice</a>
            <a href="../../exercices.html" class="btn-back">Retour aux exercices</a>
        </div>
    </main>

    <script src="./js/solution.js"></script>
</body>
</html> 